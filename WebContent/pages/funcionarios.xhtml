<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	      xmlns:f="http://xmlns.jcp.org/jsf/core"
      	  xmlns:h="http://xmlns.jcp.org/jsf/html"
      	  xmlns:a4j="http://richfaces.org/a4j"
    		  xmlns:rich="http://richfaces.org/rich">
	<h:head>
		<title>ERP Web</title>
		<h:outputStylesheet library="css" name="app.css" />
		<h:outputScript library="js" name="primefaces-calendar-pt_BR.js"/>
	</h:head>
	<h:body>
		<div id="cabecalho">
			<ul id="menu-principal">
				<li>
					<h:link value="Funcionários" outcome="/pages/funcionarios" />
				</li>
			</ul>
		</div>
		
		<h:messages id="msg" errorClass="errors" infoClass="notice" />
		
		<div id="conteudo">
			<div id="container">
				<h:form id="form">
					<h1>
						<h:outputText value="Novo Funcionário" 
							rendered="#{empty funcionarioBean.funcionario.id}" />
		
						<h:outputText value="Editar Funcionário" 
							rendered="#{not empty funcionarioBean.funcionario.id}" />
					</h1>
					
					<h:inputHidden value="#{funcionarioBean.funcionario.id}" />
				
						<h:outputLabel value="Nome" for="nome" />
						<h:inputText id="nome" value="#{funcionarioBean.funcionario.nome}" 
							styleClass="texto-longo" required="true" label="Nome">
							<f:validateRegex pattern="[a-zA-Z]+" />
						</h:inputText>
			
						<h:outputLabel value="Endereço" for="endereco" />
						<h:inputTextarea id="endereco" 
							value="#{funcionarioBean.funcionario.endereco}" rows="3"
							styleClass="texto-longo" label="Endereço" />
			
						<h:outputLabel value="Data de Nascimento" for="data" />
						<rich:calendar id="data" value="#{funcionarioBean.funcionario.dataDeNascimento}"
							required="true" label="Data de Nascimento" datePattern="dd/MM/yyyy"
							locale="pt_BR" >
							<f:validator validatorId="maiorDeIdadeValidator"/>
						</rich:calendar>
						
						<h:outputLabel value="Salário" for="salario" />
						<h:inputText id="salario" value="#{funcionarioBean.funcionario.salario}"
							label="Salário">
							<f:convertNumber locale="pt_BR"/>
						</h:inputText>
						
						<h:outputLabel value="Cargo" for="cargo" />
						<h:selectOneMenu id="cargo" value="#{funcionarioBean.funcionario.cargo}"
							label="Cargo">
							<f:selectItem itemValue="DBA" itemLabel="DBA"/>
							<f:selectItem itemValue="DESENVOLVEDOR" itemLabel="Desenvolvedor"/>
							<f:selectItem itemValue="ANALISTA_DE_SISTEMAS" itemLabel="Analista de Sistemas"/>
							<f:selectItem itemValue="GERENTE_DE_PROJETOS" itemLabel="Gerente de Projetos"/>
						</h:selectOneMenu>
		
					<div class="acoes-principais">
						<h:commandLink value="Cancelar" action="funcionarios.xhtml" immediate="true">
						</h:commandLink >
						&#160;
						<h:commandButton value="Salvar" action="#{funcionarioBean.salva}">
							<f:ajax execute="@form" render="@form :msg"/>
						</h:commandButton>
					</div>
					
					<rich:dataTable value="#{funcionarioBean.funcionarios}" var="funcionario"
						rows="5">
						<f:facet name="footer">
							<rich:dataScroller />
						</f:facet>
						<rich:column style="width:5%">
							<f:facet name="header">ID</f:facet>
							#{funcionario.id}
						</rich:column>
						<rich:column>
							<f:facet name="header">Nome</f:facet>
							#{funcionario.nome}
						</rich:column>
						<rich:column>
							<f:facet name="header">Data de Nascimento</f:facet>
							<h:outputText value="#{funcionario.dataDeNascimento}">
								<f:convertDateTime pattern="dd/MM/yyyy" />
							</h:outputText>
						</rich:column>
						<rich:column>
							<f:facet name="header">Cargo</f:facet>
							#{funcionario.cargo.descricao}
						</rich:column>
						<rich:column>
							<f:facet name="header">Ações</f:facet>
							<h:commandLink value="remover" 
								action="#{funcionarioBean.remove(funcionario)}" immediate="true">
								<f:ajax render="@form" />
							</h:commandLink>
							&#160;
							<h:commandLink value="alterar" immediate="true" action="funcionarios.xhtml">
								<f:setPropertyActionListener value="#{funcionario}" 
										target="#{funcionarioBean.funcionario}" />
							</h:commandLink>
						</rich:column>
					</rich:dataTable>
				</h:form>
			</div>
		</div>
		
		<div id="rodape">
		     <div class="rodape-bar">
				<strong>ERP Web</strong> - TriadWorks
			</div>
		</div>
	</h:body>
</html>